<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FriendFinder - Survey</title>

    <!-- Components -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<body>

    <div class="container">
        <div class="Jumbotron">
            <h2>Friend Finder Survey</h2>
            <h4>Fill out the questions below to find your match!</h4>
        </div>
        <hr>

        <h3>User Info</h3>

        <form role="form">
            <div class="form-group">
                <label for="user-name">Name</label>
                <input type="text" class="form-control" id="user-name">
            </div>
            <div class="form-group">
                <label for="user-picture">User Picture URL</label>
                <input type="text" class="form-control" id="user-picture">
            </div>
        </form>

        <h3>Questions</h3>

        <ol>
            <li>
                <h5>How much do you like frogs?</h5>
                <select id="q1">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
            <li>
                <h5>Would you enjoy having a lot of a frogs?</h5>
                <select id="q2">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
            <li>
                <h5>Do frogs scare you?</h5>
                <select id="q3">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
            <li>
                <h5>If it rained frogs, would that be cool?</h5>
                <select id="q4">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
            <li>
                <h5>Does the concept of a frog seem weird?</h5>
                <select id="q5">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
            <li>
                <h5>Have you ever considered owning a frog?</h5>
                <select id="q6">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
            <li>
                <h5>How may legs do frogs have?</h5>
                <select id="q7">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
            <li>
                <h5>How many toes do frogs have?</h5>
                <select id="q8">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
            <li>
                <h5>How many frogs would you like to own if each number below was multiplied by 20?</h5>
                <select id="q9">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
            <li>
                <h5>Was this survey fun?</h5>
                <select id="q10">
                    <option value></option> <!-- Blank -->
                    <option value="1">1 - Strongly Disagree</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - Strongly Agree</option>
                </select>
            </li>
        </ol>

        <button type="submit" class="btn btn-primary submit">Submit</button>

    </div>
    
    <!-- Modal -->
    <div class="modal fade" id="matchModal" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Your Match!</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                </div>
                <div class="modal-body">
                    <h2 id="match-name"></h2>
                    <img  id="match-photo" style="width: fit-content;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>


<script type="text/javascript">
    $(".submit").on("click", function (event) {
        event.preventDefault();

        let scores = [];

        for (let i = 1; i < 11; i++) {
            let score = $("#q" + i + " :selected").val();
            scores.push(score);
        }

        var newUser = {
            name: $("#user-name").val().trim(),
            picture: $("#user-picture").val().trim(),
            scores: scores
        }

        console.log(newUser);

        $.post("api/friends",
            newUser,
            function (data) {
                if (data) {
                    console.log("User added successfully");
                }
                else {
                    console.log("Error adding user");
                }
            })
            .done(function(data) {
                console.log(data);
                $("#match-name").html(data.matchName);
                $("#match-photo").attr("src", data.matchPhoto);
                $("#matchModal").modal("show");
            })

    });
</script>